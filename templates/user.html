{% extends "base.html" %}

{% load django_bootstrap5 %}
{% load avatar %}

{% block content %}
  <table class="table table-hover">
    <tr>
      <td width="256px"><img src="{{ user_|avatar:128 }}"></td>
      <td>
        <h1>User: {{ user_.username }}</h1>
        {% if user_.about_me %}<p>{{ user_.about_me }}</p>{% endif %}
        {% if user_.last_seen %}<p>Last seen on: {{ user_.last_seen }}</p>{% endif %}
        {% if user_ == user %}
          <p><a href="{% url 'accounts:edit_profile' %}">Edit your profile</a></p>
        {% elif not following %}
          <form action="{% url 'accounts:follow' username=user_.username %}" method="post" novalidate>
            {% csrf_token %}
            {% bootstrap_button button_type="submit" content="Follow" %}
          </form>
        {% else %}
          <form action="{% url 'accounts:unfollow' username=user_.username %}" method="post" novalidate>
            {% csrf_token %}
            {% bootstrap_button button_type="submit" content="Unfollow" %}
          </form>
        {% endif %}
      </td>
    </tr>
  </table>
  <hr>
  {% for post in posts %}
    {% include '_post.html' %}
  {% endfor %}
  <nav aria-label="Post navigation">
    <ul class="pagination">
      <li class="page-item{% if not prev_url %} disabled{% endif %}">
        <a class="page-link" href="{{ prev_url }}">
          <span aria-hidden="true">&larr;</span> Newer posts
        </a>
      </li>
      <li class="page-item{% if not next_url %} disabled{% endif %}">
        <a class="page-link" href="{{ next_url }}">
          Older posts <span aria-hidden="true">&rarr;</span>
        </a>
      </li>
    </ul>
  </nav>
{% endblock %}
